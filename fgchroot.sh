#!/bin/bash

clear
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNmdhysoo++///:::////++oosyhdmNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmhs+/-.      *.-:.*///////. ::-.*     *.-/+shmMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmyo:.    *-/+s+ mNMMMMMs.MMMMMMMo.MMMMMMN/.ys+:-*    ./oymMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMmy+-    *:: hNMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMN:.+-*   *:oyNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMms/*   *:ohmMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMmy+-    ./ymMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNy/.   *:/ NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM:-o-    .+hNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMms:    .+hMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMNh+.   *:yNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMms-     omMMMMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMMMMMd-     :sNMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMNy:    .oy mMMMMMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMMMMMM/:d+*    :hMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMd+*   */dMMh mMMMMMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMMMMMM/:MMMh/    *+mMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMy-    .sNMMMMh mMMMMMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMMMMMM/:MMMMMNo*    :hMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMNs*    - mMMMMMMh mMMMMMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMMMMMM/:MMMMMMM:.-    .sMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMNo*    /dm mMMMMMMh mMMMMMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMMMMMM//MMMMMMM:/Mh:    *sNMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMNo*    /mMMm mMMMMMMh mMMMMMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMMMMMM/+MMMMMMM:+MMMd:    *sNMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMNo*    :dMMMMm mMMMMMMh mMMMMMMh NMMMMMMy NMMMMMMy MMMMMMMs.MMMMMMMo.MMMMMMM/-MMMMMMM/-MMMMMMM::MMMMMMM:+MMMMMMM:+MMMMMh-    *sMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33m/----------*     *------- -------. -------. -------. -------. -------. -------* -------**-------**-------**-------**-------**-------      .-----------\033[0m"
echo -e "\033[1;33ms+++++++:                                                                                                                                    /+++++++o\033[0m"
echo -e "\033[1;33mMMMMMMN+                                                                                                                                     *sMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMd.                                                  ***                     **                                                            -mMMMMM\033[0m"
echo -e "\033[1;33mMMMM+       -------.------. .------. -------*------.   .-----* *---   ---*    *.----.    *--. .---------------.-.  .--  .-. *--. *--   .-.       sMMMM\033[0m"
echo -e "\033[1;33mMMm-        --*****.-....--..-.***** --******--...--. .--***--.*---* *---*    --.**.--   .--- ***--.**.--******--  ---  .-* .---  .-. *--*        :NMM\033[0m"
echo -e "\033[1;33mMh*         --     .-.   .-..-.      -:      --    --*--*   *--*-.-. .---*   .-.    ..   --.-.   .-.  *--      --**---* --  ----. *--*.-.          .dM\033[0m"
echo -e "\033[1;33ms           --....*.-.***--*.--..... --..... --    .----     --*-.-. .---*   --*  ****  .-.*--   .-.  *--..... .-.*-.-.*-. .-.*--  .----            *y\033[0m"
echo -e "\033[1;33my           ------..------- .--..... --..... --    .----     --*-..-*-.--*   --.  ----* --* --*  .-.  *--..... *--.- --.-* --* --*  .--*             s\033[0m"
echo -e "\033[1;33mMh*         --     .-.  *--*.-.      -:      --    --.--*   *--*-.*-.-*--*   .-.    --**------.  .-.  *--       ---- .--- *------.  *--            *hM\033[0m"
echo -e "\033[1;33mMMm-        --     .-.   .-*.-.***** --***** --***.-. .-.* *--.*-. --- --*   *--.  .--*.-....--* .-.  *--****** .--. *--. .-....--* *--           .mMM\033[0m"
echo -e "\033[1;33mMMMM/       --     .-.   .-..-------*-------*------.   .-----. *-. .-. --*    *-----.-.--*   .-. .-.  *-------. *--* *--**--    .-. *--          /NMMM\033[0m"
echo -e "\033[1;33mMMMMMy*     **     ***    ** ******* ******* *****      **.**   *   *  **       ***  ****     ** ***   ********  **   **  **     **  **        *yMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMN:                                                                                                                                      :mMMMMMM\033[0m"
echo -e "\033[1;33mhhhhhhhh/                                                                                                                                    :hhhhhhhd\033[0m"
echo -e "\033[1;33m                                                                                                                                                     :\033[0m"
echo -e "\033[1;33mNNNNNNNNNNNd-    *oNNNNNN/:NNNNNNN::NNNNNNN:/NNNNNNN-/NNNNNNN-+NNNNNNN.oNNNNNNN oNNNNNNm yNNNNNNm yNNNNNNm hNNNNNNd dNNNNNNd mNNNNNs*    -hNNNNNNNNNNN\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMy.    .yMMMM+:MMMMMMM::MMMMMMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMMMMMMm mMMMMMMm NMMMh-    .yMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMs*    -hMM+/MMMMMMM:/MMMMMMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMMMMMMm mMMMMMMm NMd:    *sNMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMNs.    -h//MMMMMMM:/MMMMMMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMMMMMMm mMMMMMMm h:    *sNMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMy.     :MMMMMMM-/MMMMMMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMMMMMMm mMMMMMMy     .sNMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMh:    .oNMMMM-/MMMMMMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMMMMMMm mMMMNs.    -yMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMm+*    /hMM-/MMMMMMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMMMMMMm mMd/*   *+dMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMy:    .o.oMMMMMMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMMMMMMm +.    :yNMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMNs-    .omMMMMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMMMMms-    -omMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMms-    .+hMM:/MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMN hMdo.    -omMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNy/*   *:./MMMMMMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMMMMMMd -*   *:yNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMds:*   *:ohNMM-/MMMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMMMN yMNho:*   *:odMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMds/.    *:*:dNMMMMM-oMMMMMMM.sMMMMMMM sMMMMMMN yMMMMNdy -.    ./sdMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNds+-*    *-/os./mNMMMMM.sMMMMMMM sMMMMNmh /o/-*    *-/sdNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNdyo/:.*      *.-- .::::::: .-.*       .:/oydNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"
echo -e "\033[1;33mMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNmdhyso+++///::::///+++osyhdmNMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\033[0m"

echo ""
echo -e "\033[1;33mWelcome to the Freedom Gateway Linux Installer PART TWO!\033[0m"
echo -e "\033[1;33mThis is the second of two scripts, and it will handle the tedium of getting the basic system installed automatically.\033[0m"
echo -e ""
sleep 1
echo -e "\033[1:33m...HWCLOCK\033[0m"
sleep 1
hwclock --systohc
echo -e "\033[1:33m...Generate locales\033[0m"
sleep 1
locale-gen
echo -e "\033[1:33m...Set the hostname\033[0m"
sleep 1
hostnamectl set-hostname freedomgatewayatm
echo -e "\033[1:33m...Populate the hosts file\033[0m"
sleep 1
echo '127.0.0.1 localhost' >> /etc/hosts
echo '::1 localhost' >> /etc/hosts
echo '127.0.1.1 freedomgatewayatm.localdomain freedomgatewayatm' >> /etc/hosts
echo -e "\033[1:33mPacman prep\033[0m"
sleep 1
pacman -Sy --noconfirm
echo -e "\033[1:33m...Install networkmanager\033[0m"
sleep 1
pacman -S --noconfirm networkmanager nano sudo
echo -e "\033[1:33m......Enable NetworkManager.service\033[0m"
sleep 1
systemctl enable NetworkManager.service
echo -e "\033[1:33mPlease set the root password\033[0m"
passwd
echo -e "\033[1:33mInstall xorg\033[0m"
sleep 1
pacman -S --noconfirm xorg
echo -e "\033[1:33m...Install kde plasma\033[0m"
echo -e "...disabled...uncomment this section and comment this line if you need this feature"
sleep 1
pacman -S --noconfirm plasma
#echo -e "\033[1:33mMake a new user!\033[0m"
#useradd -m freedomgateway
#gpasswd -a freedomgateway wheel
#gpasswd -a freedomgateway rfkill
#gpasswd -a freedomgateway log
#gpasswd -a freedomgateway http
echo -e "\033[1:33mInstall OpenJDK latest\033[0m"
sleep 1
pacman -S --noconfirm jdk-openjdk
echo -e "\033[1:33mInstall and configure SDDM\033[0m"
echo -e "...disabled...uncomment this section and comment this line if you need this feature"
sleep 1
pacman -S --noconfirm sddm
systemctl enable sddm.service
echo -e "\033[1:33mInstall firefox\033[0m"
sleep 1
pacman -S --noconfirm firefox
echo -e "\033[1:33mInstall nemo\033[0m"
sleep 1
pacman -S --nonconfirm nemo
echo -e "\033[1:33mTry to make silent GRUB type bootloader\033[0m"
sleep 1
pacman -S --noconfirm grub efibootmgr dosfstools os-prober mtools
#efibootmgr --disk /dev/sda --part 1 --create --label "FG ATM" --loader /vmlinuz-linux --unicode 'root=PARTUUID=BF934EC8-B3C2-4539-800D-1940DD71BDCB rw initrd=\initramfs-linux.img' --verbose
# this does not work do not use the efibootmgr command. we're gonna try grub silent now.
mkdir /boot/EFI
mount /dev/sda1 /boot/EFI/
grub-install --target=x86_64-efi --efi-directory=/boot/EFI --bootloader-id=freedom_gateway_atm --recheck
sed -i 's/GRUB_TIMEOUT=5/GRUB_TIMEOUT=0/' /etc/default/grub
echo 'GRUB_HIDDEN_TIMEOUT_QUIET=true' >> /etc/default/grub
grub-mkconfig -o /boot/grub/grub.cfg
